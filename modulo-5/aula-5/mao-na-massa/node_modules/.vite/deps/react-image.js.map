{
  "version": 3,
  "sources": ["../../@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js", "../../react-image/esm/index.js", "../../@babel/runtime/helpers/esm/defineProperty.js", "../../react-image/esm/useImage-1647a9b7.js", "../../react-image/esm/Img.js"],
  "sourcesContent": ["export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}", "import '@babel/runtime/helpers/objectWithoutPropertiesLoose';\nimport 'react';\nimport '@babel/runtime/helpers/defineProperty';\nexport { u as useImage } from './useImage-1647a9b7.js';\nexport { default as Img } from './Img.js';\n//# sourceMappingURL=index.js.map\n", "export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}", "import { useState } from 'react';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\n\n// returns a Promisized version of Image() api\nvar imagePromiseFactory = (function (_ref) {\n  var _ref$decode = _ref.decode,\n      decode = _ref$decode === void 0 ? true : _ref$decode,\n      _ref$crossOrigin = _ref.crossOrigin,\n      crossOrigin = _ref$crossOrigin === void 0 ? '' : _ref$crossOrigin;\n  return function (src) {\n    return new Promise(function (resolve, reject) {\n      var i = new Image();\n      if (crossOrigin) i.crossOrigin = crossOrigin;\n\n      i.onload = function () {\n        decode && i.decode ? i.decode().then(resolve)[\"catch\"](reject) : resolve();\n      };\n\n      i.onerror = reject;\n      i.src = src;\n    });\n  };\n});\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar removeBlankArrayElements = function removeBlankArrayElements(a) {\n  return a.filter(function (x) {\n    return x;\n  });\n};\n\nvar stringToArray = function stringToArray(x) {\n  return Array.isArray(x) ? x : [x];\n};\n\nvar cache = {}; // sequential map.find for promises\n\nvar promiseFind = function promiseFind(arr, promiseFactory) {\n  var done = false;\n  return new Promise(function (resolve, reject) {\n    var queueNext = function queueNext(src) {\n      return promiseFactory(src).then(function () {\n        done = true;\n        resolve(src);\n      });\n    };\n\n    arr.reduce(function (p, src) {\n      // ensure we aren't done before enquing the next source\n      return p[\"catch\"](function () {\n        if (!done) return queueNext(src);\n      });\n    }, queueNext(arr.shift()))[\"catch\"](reject);\n  });\n};\n\nfunction useImage(_ref) {\n  var srcList = _ref.srcList,\n      _ref$imgPromise = _ref.imgPromise,\n      imgPromise = _ref$imgPromise === void 0 ? imagePromiseFactory({\n    decode: true\n  }) : _ref$imgPromise,\n      _ref$useSuspense = _ref.useSuspense,\n      useSuspense = _ref$useSuspense === void 0 ? true : _ref$useSuspense;\n\n  var _useState = useState(true),\n      setIsLoading = _useState[1];\n\n  var sourceList = removeBlankArrayElements(stringToArray(srcList));\n  var sourceKey = sourceList.join('');\n\n  if (!cache[sourceKey]) {\n    // create promise to loop through sources and try to load one\n    cache[sourceKey] = {\n      promise: promiseFind(sourceList, imgPromise),\n      cache: 'pending',\n      error: null\n    };\n  } // when promise resolves/reject, update cache & state\n\n\n  cache[sourceKey].promise // if a source was found, update cache\n  // when not using suspense, update state to force a rerender\n  .then(function (src) {\n    cache[sourceKey] = _objectSpread(_objectSpread({}, cache[sourceKey]), {}, {\n      cache: 'resolved',\n      src: src\n    });\n    if (!useSuspense) setIsLoading(false);\n  }) // if no source was found, or if another error occured, update cache\n  // when not using suspense, update state to force a rerender\n  [\"catch\"](function (error) {\n    cache[sourceKey] = _objectSpread(_objectSpread({}, cache[sourceKey]), {}, {\n      cache: 'rejected',\n      error: error\n    });\n    if (!useSuspense) setIsLoading(false);\n  });\n\n  if (cache[sourceKey].cache === 'resolved') {\n    return {\n      src: cache[sourceKey].src,\n      isLoading: false,\n      error: null\n    };\n  }\n\n  if (cache[sourceKey].cache === 'rejected') {\n    if (useSuspense) throw cache[sourceKey].error;\n    return {\n      isLoading: false,\n      error: cache[sourceKey].error,\n      src: undefined\n    };\n  } // cache[sourceKey].cache === 'pending')\n\n\n  if (useSuspense) throw cache[sourceKey].promise;\n  return {\n    isLoading: true,\n    src: undefined,\n    error: null\n  };\n}\n\nexport { imagePromiseFactory as i, useImage as u };\n//# sourceMappingURL=useImage-1647a9b7.js.map\n", "import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/objectWithoutPropertiesLoose';\nimport React from 'react';\nimport '@babel/runtime/helpers/defineProperty';\nimport { i as imagePromiseFactory, u as useImage } from './useImage-1647a9b7.js';\n\nvar passthroughContainer = function passthroughContainer(x) {\n  return x;\n};\n\nfunction Img(_ref) {\n  var _ref$decode = _ref.decode,\n      decode = _ref$decode === void 0 ? true : _ref$decode,\n      _ref$src = _ref.src,\n      srcList = _ref$src === void 0 ? [] : _ref$src,\n      _ref$loader = _ref.loader,\n      loader = _ref$loader === void 0 ? null : _ref$loader,\n      _ref$unloader = _ref.unloader,\n      unloader = _ref$unloader === void 0 ? null : _ref$unloader,\n      _ref$container = _ref.container,\n      container = _ref$container === void 0 ? passthroughContainer : _ref$container,\n      _ref$loaderContainer = _ref.loaderContainer,\n      loaderContainer = _ref$loaderContainer === void 0 ? passthroughContainer : _ref$loaderContainer,\n      _ref$unloaderContaine = _ref.unloaderContainer,\n      unloaderContainer = _ref$unloaderContaine === void 0 ? passthroughContainer : _ref$unloaderContaine,\n      imgPromise = _ref.imgPromise,\n      crossorigin = _ref.crossorigin,\n      _ref$useSuspense = _ref.useSuspense,\n      useSuspense = _ref$useSuspense === void 0 ? false : _ref$useSuspense,\n      imgProps = _objectWithoutPropertiesLoose(_ref, [\"decode\", \"src\", \"loader\", \"unloader\", \"container\", \"loaderContainer\", \"unloaderContainer\", \"imgPromise\", \"crossorigin\", \"useSuspense\"]);\n\n  imgPromise = imgPromise || imagePromiseFactory({\n    decode: decode,\n    crossOrigin: crossorigin\n  });\n\n  var _useImage = useImage({\n    srcList: srcList,\n    imgPromise: imgPromise,\n    useSuspense: useSuspense\n  }),\n      src = _useImage.src,\n      isLoading = _useImage.isLoading; // console.log({src, isLoading, resolvedSrc, useSuspense})\n  // show img if loaded\n\n\n  if (src) return container( /*#__PURE__*/React.createElement(\"img\", Object.assign({\n    src: src\n  }, imgProps))); // show loader if we have one and were still trying to load image\n\n  if (!useSuspense && isLoading) return loaderContainer(loader); // show unloader if we have one and we have no more work to do\n\n  if (!useSuspense && unloader) return unloaderContainer(unloader);\n  return null;\n}\n\nexport default Img;\n//# sourceMappingURL=Img.js.map\n"],
  "mappings": "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",
  "names": ["import_react", "removeBlankArrayElements", "stringToArray", "promiseFind", "queueNext", "import_react", "passthroughContainer", "React"]
}
